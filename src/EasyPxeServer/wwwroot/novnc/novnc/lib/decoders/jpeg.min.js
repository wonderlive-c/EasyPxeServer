/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/@novnc/novnc@1.6.0/lib/decoders/jpeg.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(l)throw o}}}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var r=_toPrimitive(e,"string");return"symbol"==_typeof(r)?r:r+""}function _toPrimitive(e,r){if("object"!=_typeof(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var JPEGDecoder=exports.default=function(){return _createClass((function e(){_classCallCheck(this,e),this._cachedQuantTables=[],this._cachedHuffmanTables=[],this._segments=[]}),[{key:"decodeRect",value:function(e,r,t,n,a,o,i){for(;;){var l=this._readSegment(a);if(null===l)return!1;if(this._segments.push(l),217===l[1])break}var u,f=[],s=[],c=_createForOfIteratorHelper(this._segments);try{for(c.s();!(u=c.n()).done;){var y=u.value,p=y[1];196===p?f.push(y):219===p&&s.push(y)}}catch(e){c.e(e)}finally{c.f()}var h,m,_=this._segments.findIndex((function(e){return 192==e[1]||194==e[1]}));if(-1==_)throw new Error("Illegal JPEG image without SOF");0===s.length&&(h=this._segments).splice.apply(h,[_+1,0].concat(_toConsumableArray(this._cachedQuantTables)));0===f.length&&(m=this._segments).splice.apply(m,[_+1,0].concat(_toConsumableArray(this._cachedHuffmanTables)));var b,d=0,v=_createForOfIteratorHelper(this._segments);try{for(v.s();!(b=v.n()).done;){d+=b.value.length}}catch(e){v.e(e)}finally{v.f()}var g=new Uint8Array(d);d=0;var w,A=_createForOfIteratorHelper(this._segments);try{for(A.s();!(w=A.n()).done;){var P=w.value;g.set(P,d),d+=P.length}}catch(e){A.e(e)}finally{A.f()}return o.imageRect(e,r,t,n,"image/jpeg",g),0!==f.length&&(this._cachedHuffmanTables=f),0!==s.length&&(this._cachedQuantTables=s),this._segments=[],!0}},{key:"_readSegment",value:function(e){if(e.rQwait("JPEG",2))return null;var r=e.rQshift8();if(255!=r)throw new Error("Illegal JPEG marker received (byte: "+r+")");var t=e.rQshift8();if(t>=208&&t<=217||1==t)return new Uint8Array([r,t]);if(e.rQwait("JPEG",2,2))return null;var n=e.rQshift16();if(n<2)throw new Error("Illegal JPEG length received (length: "+n+")");if(e.rQwait("JPEG",n-2,4))return null;var a=0;if(218===t)for(a+=2;;){if(e.rQwait("JPEG",n-2+a,4))return null;var o=e.rQpeekBytes(n-2+a,!1);if(255===o.at(-2)&&0!==o.at(-1)&&!(o.at(-1)>=208&&o.at(-1)<=215)){a-=2;break}a++}var i=new Uint8Array(2+n+a);return i[0]=r,i[1]=t,i[2]=n>>8,i[3]=n,i.set(e.rQshiftBytes(n-2+a,!1),4),i}}])}();
//# sourceMappingURL=/sm/b75aa1fd4693744c0d933d6034f66075c1dc473bed7df7c98c384e12ecdb74f5.map