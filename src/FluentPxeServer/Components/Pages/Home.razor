@page "/"
@using PxeServices
@inject PxeServerService PxeServerService
@inject VncService       VncService


<PageTitle>PXE Server & VNC Console</PageTitle>

<FluentStack Orientation="Orientation.Vertical"
             HorizontalAlignment="HorizontalAlignment.Center">
    <!-- Header Section with Animation -->
    <FluentStack HorizontalAlignment="HorizontalAlignment.Center" >
        <FluentLabel>
            PXE Server & VNC Console
        </FluentLabel>
        <FluentLabel>
            一站式网络引导和远程控制解决方案，为IT管理员提供高效的服务器管理工具
        </FluentLabel>
    </FluentStack>
    <FluentStack Orientation="Orientation.Horizontal" HorizontalAlignment="HorizontalAlignment.Center">
        <FluentCard MinimalStyle="true">
            <FluentStack Orientation="Orientation.Horizontal" HorizontalAlignment="HorizontalAlignment.Center">
                <FluentIcon Value="@(new Icons.Color.Size24.Apps())"/>
                <FluentLabel>PXE服务器</FluentLabel>
            </FluentStack>
            <FluentStack Orientation="Orientation.Vertical">
                <!-- Status Badge with Custom Styling -->
                <FluentStack HorizontalAlignment="HorizontalAlignment.Left">
                    <FluentBadge Fill="somevalue"
                                 Color="@(PxeServerService.IsRunning ? "green" : "red")"
                                 Appearance="@(PxeServerService.IsRunning ? Appearance.Accent : Appearance.Lightweight)">
                        @(PxeServerService.IsRunning ? "运行中" : "已停止")
                    </FluentBadge>
                </FluentStack>

                <!-- Description with Better Typography -->
                <FluentStack Orientation="Orientation.Vertical" Spacing="12px">
                    <FluentLabel>
                        管理网络引导和部署服务
                    </FluentLabel>
                    <FluentStack Orientation="Orientation.Vertical">
                        <FluentStack Orientation="Orientation.Horizontal">
                            <FluentIcon Value="@(new Icons.Filled.Size16.Star())"/>
                            <FluentLabel>DHCP 服务</FluentLabel>
                        </FluentStack>
                        <FluentStack Orientation="Orientation.Horizontal">
                            <FluentIcon Value="@(new Icons.Filled.Size16.Star())"/>
                            <FluentLabel>TFTP 文件传输</FluentLabel>
                        </FluentStack>
                        <FluentStack Orientation="Orientation.Horizontal">
                            <FluentIcon Value="@(new Icons.Filled.Size16.Star())"/>
                            <FluentLabel>网络引导配置</FluentLabel>
                        </FluentStack>
                    </FluentStack>
                </FluentStack>

                <!-- Action Button with Better Styling -->
                <FluentStack HorizontalAlignment="HorizontalAlignment.Center">
                    <FluentAnchor
                        Href="/pxe">
                        <span>管理PXE服务</span>
                    </FluentAnchor>
                </FluentStack>
            </FluentStack>
        </FluentCard>
        <FluentCard MinimalStyle="true">
            <FluentStack Orientation="Orientation.Horizontal" HorizontalAlignment="HorizontalAlignment.Center">
                <FluentIcon Value="@(new Icons.Color.Size24.Laptop())"/>
                <FluentLabel>VNC控制台</FluentLabel>
            </FluentStack>
            <FluentStack Orientation="Orientation.Vertical">
                <!-- Status Badge with Custom Styling -->
                <FluentStack HorizontalAlignment="HorizontalAlignment.Left">
                    <FluentBadge Fill="somevalue"
                                 Color="@(VncService.GetActiveConnections().Count > 0 ? "green" : "gray")"
                                 Appearance="@(VncService.GetActiveConnections().Count > 0 ? Appearance.Accent : Appearance.Lightweight)">
                        @(VncService.GetActiveConnections().Count) 活跃会话
                    </FluentBadge>
                </FluentStack>

                <!-- Description with Better Typography -->
                <FluentStack Orientation="Orientation.Vertical">
                    <FluentLabel>
                        远程控制和管理计算机
                    </FluentLabel>
                    <FluentStack Orientation="Orientation.Vertical" class="pl-4">
                        <FluentStack Orientation="Orientation.Horizontal">
                            <FluentIcon Value="@(new Icons.Filled.Size16.Star())"/>
                            <FluentLabel>远程桌面访问</FluentLabel>
                        </FluentStack>
                        <FluentStack Orientation="Orientation.Horizontal">
                            <FluentIcon Value="@(new Icons.Filled.Size16.Star())"/>
                            <FluentLabel>键盘鼠标控制</FluentLabel>
                        </FluentStack>
                        <FluentStack Orientation="Orientation.Horizontal">
                            <FluentIcon Value="@(new Icons.Filled.Size16.Star())"/>
                            <FluentLabel>多会话管理</FluentLabel>
                        </FluentStack>
                    </FluentStack>
                </FluentStack>

                <!-- Action Button with Better Styling -->
                <FluentStack HorizontalAlignment="HorizontalAlignment.Center">
                    <FluentAnchor
                        Href="/vnc"
                        Appearance="Appearance.Neutral">
                        <span>打开VNC控制台</span>
                    </FluentAnchor>
                </FluentStack>
            </FluentStack>
        </FluentCard>
    </FluentStack>
    <FluentLabel>
        功能概述
    </FluentLabel>

    <!-- Features Overview - Enhanced with Animation and Spacing -->
    <FluentStack
        Orientation="Orientation.Horizontal">

        <!-- Divider with Styled Design -->
        <FluentCard MinimalStyle="true">
            <FluentStack
                Orientation="Orientation.Vertical"
                HorizontalAlignment="HorizontalAlignment.Center"

                Class="h-full">
                <!-- Avatar with Custom Size and Style -->

                <FluentIcon Value="@(new Icons.Color.Size32.Poll())" />
                <!-- Title with Better Typography -->
                <FluentLabel>
                    网络引导
                </FluentLabel>

                <!-- Description with Better Readability -->
                <FluentLabel>
                    通过网络启动计算机，无需本地存储设备，适用于大规模部署和系统安装。
                </FluentLabel>
            </FluentStack>
        </FluentCard>
        <FluentCard MinimalStyle="true">
            <FluentStack
                Orientation="Orientation.Vertical"
                HorizontalAlignment="HorizontalAlignment.Center">
                <!-- Avatar with Custom Size and Style -->

                <FluentIcon Value="@(new Icons.Color.Size32.Document())"/>
                <!-- Title with Better Typography -->
                <FluentLabel>
                    文件传输
                </FluentLabel>

                <!-- Description with Better Readability -->
                <FluentLabel>
                    通过TFTP协议快速传输引导文件和系统镜像，支持高效的网络文件传输。
                </FluentLabel>
            </FluentStack>
        </FluentCard>
        <FluentCard MinimalStyle="true">
            <FluentStack
                Orientation="Orientation.Vertical"
                HorizontalAlignment="HorizontalAlignment.Center">
                <!-- Avatar with Custom Size and Style -->

                <FluentIcon Value="@(new Icons.Color.Size32.Laptop())" />
                <!-- Title with Better Typography -->
                <FluentLabel>
                    远程控制
                </FluentLabel>

                <!-- Description with Better Readability -->
                <FluentLabel>
                    通过VNC协议远程控制计算机，支持全键盘鼠标操作和屏幕共享，实现高效远程管理。
                </FluentLabel>
            </FluentStack>
        </FluentCard>

    </FluentStack>

</FluentStack>

@code {

    protected override void OnInitialized()
    {
        // 监听PXE服务器状态变化
        PxeServerService.StatusChanged += delegate { InvokeAsync(StateHasChanged); };
    }

}